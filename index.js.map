{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/main.js"],"sourcesContent":["import axios from \"axios\";\nimport iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\n\nexport default async function getImagesByQuery(query, page = 1) {\n  try {\n    const response = await axios.get(\"https://pixabay.com/api/\", {\n      params: {\n        key: \"51402348-a0c5f352e8dacc54a34bc803e\",\n        q: query,\n        image_type: \"photo\",\n        orientation: \"horizontal\",\n        safesearch: true,\n        per_page: 15,\n        page: page,\n      },\n    });\n\n    if (response.data.hits.length === 0) {\n      iziToast.show({\n        message: 'Sorry, there are no images matching your search query. Please try again!',\n        messageColor: \"#fff\",\n        backgroundColor: \"#EF4040\",\n        position: \"topRight\",\n      });\n\n    }\n    \n    return {\n        hits: response.data.hits,\n        totalHits: response.data.totalHits\n    };\n  } catch (error) {\n    throw error;\n  }\n}\n","import SimpleLightbox from \"simplelightbox\";\nimport \"simplelightbox/dist/simple-lightbox.min.css\";\n\nlet galleryBox = new SimpleLightbox('.gallery a');\n\nexport function createGallery(images) {\n    const gallery = document.querySelector(\".gallery\");\n    const markup = images.map((image) => {\n        const { webformatURL, largeImageURL, tags, likes, views, comments, downloads } = image;\n        return `<li class=\"img-li\">\n        <a href=\"${largeImageURL}\">\n        <img src=\"${webformatURL}\" alt=\"${tags}\" class=\"img\">\n        <div class=\"all-stats\">\n        <div class=\"stats\"><p class=\"stats-name\">Likes</p><p class=\"stats-value\">${likes}</p></div>\n        <div class=\"stats\"><p class=\"stats-name\">Views</p><p class=\"stats-value\">${views}</p></div>\n        <div class=\"stats\"><p class=\"stats-name\">Comments</p><p class=\"stats-value\">${comments}</p></div>\n        <div class=\"stats\"><p class=\"stats-name\">Downloads</p><p class=\"stats-value\">${downloads}</p></div>\n        </div>\n        </a>\n        </li>`\n    }).join(\"\");\n    gallery.insertAdjacentHTML(\"beforeend\", markup);\n    galleryBox.refresh()\n}\n\nexport function clearGallery() { \n    document.querySelector(\".gallery\").innerHTML = ''\n}\n\nexport function showLoader() {\n    document.querySelector(\".loader\").classList.remove(\"visually-hidden\");\n }\n\nexport function hideLoader() {\n    document.querySelector(\".loader\").classList.add(\"visually-hidden\");\n}\n\nexport function showLoadMoreButton() { \n    document.querySelector(\".load-more\").classList.remove(\"visually-hidden\");\n};\n\nexport function hideLoadMoreButton() { \n    document.querySelector(\".load-more\").classList.add(\"visually-hidden\");\n};\n\n","import iziToast from \"izitoast\";\nimport \"izitoast/dist/css/iziToast.min.css\";\nimport getImages from \"./js/pixabay-api\"\nimport {createGallery as markup, clearGallery, showLoader, hideLoader, showLoadMoreButton, hideLoadMoreButton} from \"./js/render-functions\"\n\nconst form = document.querySelector(\".form\");\nlet page = 1;\nlet search;\ndocument.querySelector(\".load-more\").addEventListener(\"click\", onLoadMoreclick);\n\nasync function onLoadMoreclick(ev) {\n    ev.preventDefault()\n    showLoader()\n    page += 1;\n    try {\n        const imagesGet = await getImages(search, page)\n            markup(imagesGet.hits)\n            const liSize = document.querySelector(\".img-li\").getBoundingClientRect().height * 2;\n            window.scrollBy({\n                top: liSize,\n                behavior: \"smooth\",\n            });\n\n            if (imagesGet.hits.length < 15 || page * 15 === imagesGet.totalHits) {\n                hideLoadMoreButton();\n                iziToast.show({\n                    message: \"We're sorry, but you've reached the end of search results.\",\n                    messageColor: '#fff',\n                    backgroundColor: '#EF4040',\n                    position: 'topRight',\n                });\n            }     \n            return;\n    } catch (error) {\n        iziToast.show({\n            message: \"Error happened\",\n            messageColor: '#fff',\n            backgroundColor: '#EF4040',\n            position: 'topRight',\n        });\n        return;\n    } finally {hideLoader()}\n}\n\nform.addEventListener(\"submit\", async (ev) => {\n    ev.preventDefault()\n    hideLoadMoreButton()\n    search = ev.currentTarget.elements['search-text'].value.trim()\n    if (!search) {\n        iziToast.show({\n            message: 'Please fill in the field',\n            messageColor: \"#fff\",\n            backgroundColor: \"#EF4040\",\n            position: \"topRight\",\n        });\n            return;\n    }\n\n    showLoader();\n    clearGallery();\n    page = 1;\n    try {\n        const imagesGet = await getImages(search)\n        if (imagesGet.totalHits > 15) { showLoadMoreButton() };\n        return markup(imagesGet.hits);\n    } catch (error) {\n        iziToast.show({\n            message: 'Error happened',\n            messageColor: \"#fff\",\n            backgroundColor: \"#EF4040\",\n            position: \"topRight\",\n        });\n        return;\n        } finally {hideLoader()}\n});"],"names":["getImagesByQuery","query","page","response","axios","iziToast","error","galleryBox","SimpleLightbox","createGallery","images","gallery","markup","image","webformatURL","largeImageURL","tags","likes","views","comments","downloads","clearGallery","showLoader","hideLoader","showLoadMoreButton","hideLoadMoreButton","form","search","onLoadMoreclick","ev","imagesGet","getImages","liSize"],"mappings":"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"}